
DROP TABLE PRODUCTOCOCCION;
DROP TABLE CHIPEA;
DROP TABLE COCCION;
DROP TABLE MADERACHIP;
DROP TABLE LOTEMADERA;
DROP TABLE PROVEEDOR;
DROP TABLE EMPLEADO;


CREATE TABLE EMPLEADO
(
    CI NUMBER(10) PRIMARY KEY,
    NOMBRECOMPLETO VARCHAR2(50),
    TELEFONO NUMBER(10),
    CELULAR NUMBER(10),
    DIRECCION VARCHAR2(50),
    ESTCIVIL VARCHAR2(1),
    SUELDONOM NUMBER(10),
    OFICIO VARCHAR2(10),
    SECTOR VARCHAR2(10),
    TINEHIJOS NUMBER(1),
    PUESTO VARCHAR2(10),
    CIJEFE NUMBER(8) DEFAULT NULL REFERENCES EMPLEADO
);


CREATE TABLE PROVEEDOR
(
    EMAIL VARCHAR2(50) PRIMARY KEY,
    NOMBRE VARCHAR2(50),
    TELEFONO NUMBER(10),
    RUT VARCHAR2(20)  DEFAULT NULL 
);

CREATE TABLE LOTEMADERA
(
    IDLOTE NUMBER(10) PRIMARY KEY,
    CIRESPONSABLE NUMBER(10) NOT NULL REFERENCES EMPLEADO,
    EMAILPROOVEDOR VARCHAR2(50) NOT NULL REFERENCES PROVEEDOR,
    PESOINICIAL NUMBER(10) CHECK(PESOINICIAL > 0),
    PESOACTUAL NUMBER(10) CHECK(PESOACTUAL >= 0),
    FECHA DATE
);

CREATE TABLE MADERACHIP 
(
    ID NUMBER(10) PRIMARY KEY,
    PESO NUMBER(10) CHECK(PESO > 0),
    FECHA DATE
);

CREATE TABLE CHIPEA
(
    LOTE NUMBER(10) NOT NULL REFERENCES LOTEMADERA,
    EMPLEADO NUMBER(10) NOT NULL REFERENCES EMPLEADO,
    CHIP NUMBER(10) NOT NULL REFERENCES MADERACHIP
);

CREATE TABLE COCCION
(
    IDCHIP NUMBER(10) NOT NULL REFERENCES MADERACHIP,
    ID NUMBER(10)  NOT NULL,
    PESO NUMBER(10) CHECK(PESO > 0),
    FECHA DATE,
    
    PRIMARY KEY(CHIP, ID)
);

CREATE TABLE PRODUCTOCOCCION
(
    ID NUMBER(10) PRIMARY KEY,
    IDCOC NUMBER(10) NOT NULL REFERENCES COCCION(ID),
    IDCHIP NUMBER(10) NOT NULL REFERENCES COCCION(IDCHIP),
    PESO NUMBER(10) CHECK(PESO > 0),
    FECHA DATE
);

CREATE TABLE LICORNEGRO 
(
    IDLIC NUMBER(10) REFERENCES PRODUCTOCOCCION PRIMARY KEY,
    KW NUMBER(10)
);

CREATE TABLE PASTA 
(
    IDPAST NUMBER(10) REFERENCES PRODUCTOCOCCION PRIMARY KEY,
    PHIDRO NUMBER(10) CHECK (PHIDRO > 0),
    ACIDO NUMBER(10) CHECK (ACIDO > 0)
);

